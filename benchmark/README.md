# Benchmarking scripts
This folder contains the benchmarking scripts used to generate the numbers and graphs in the paper. The scripts are written in Python 3 and require the following packages:
```
matplotlib
numpy
onnx
onnxruntime
torch
```

## Usage
Each of the scripts do not take any arguments, but instead have a set of variables at the top of the file that can be changed to change the behaviour of the script. The most important variables are the ones in plotting, which have manual data entries gathered from `vitis_hls` and `vivado` runs.

# Descriptions
## `onnx_exporter.py`
This script converts the CNN_small CNN to ONNX format, which is used by the ARM CPU on the Pynq Z2 (since PyTorch is not supported on that particular platform). The script also gathers the input and prediction data into numpy (`.npy`) files, which are used by the other scripts.

## `benchmark_pytorch.py`
This script runs the CNN_small CNN on the CPU and GPU (CUDA) using PyTorch. It outputs a JSON file containing the runtime results.

## `benchmark_arm.py`
This script runs the CNN_small CNN on the ARM CPU on the Pynq Z2 using ONNX. It outputs a JSON file containing the runtime results.

## `benchmark_plotting.py`
This script plots the results of the paper. It requires the JSON files generated by the other scripts. The script also contains a set of variables that can be changed to change the behaviour of the script, in particular, it contains the TDP numbers. If proper wattage is obtained, they should be entered in this scirpt. The script produces two graphs, one comparing the runtime, and one comparing the energy efficiency.

